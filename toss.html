<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Free UPI Coin Toss</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --bg-start: #0b1020;
      --bg-end: #1b1f36;
      --card: rgba(255,255,255,0.06);
      --card-strong: rgba(255,255,255,0.1);
      --text: #e9ecf1;
      --muted: #aeb6c9;
      --primary: #6ee7ff;
      --primary-2: #8b5cf6;
      --accent: #ffd166;
      --success: #22c55e;
      --danger: #ef4444;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius-xl: 22px;
      --radius-lg: 16px;
      --radius-md: 12px;
      --glass-blur: saturate(180%) blur(10px);
      --ring: 0 0 0 2px rgba(110,231,255,.25), 0 0 0 8px rgba(139,92,246,.15);
      --coin-golden: radial-gradient(circle at 35% 35%, #ffe9b2, #ffd166 48%, #d7a43e 55%);
      --button-gradient: linear-gradient(135deg, #ffffff, #e5e7eb);
      --button-continue: linear-gradient(135deg, #ff00ff, #ff4040, #800080);
      --button-joined: #22c55e;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "El Messiri", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background: radial-gradient(1200px 800px at 10% -10%, #0f172a 0%, transparent 60%),
                  radial-gradient(1200px 800px at 110% 10%, #1e293b 0%, transparent 60%),
                  linear-gradient(160deg, var(--bg-start), var(--bg-end));
      display: grid;
      place-items: center;
      padding: 24px;
      overflow-x: hidden;
    }
    .orb { position: fixed; filter: blur(60px); opacity: .35; z-index: -1; }
    .orb.one { width: 420px; height: 420px; top: -120px; left: -120px; background: radial-gradient(circle, var(--primary) 0%, transparent 60%); }
    .orb.two { width: 420px; height: 420px; bottom: -120px; right: -120px; background: radial-gradient(circle, var(--primary-2) 0%, transparent 60%); }
    .shell {
      width: 100%;
      max-width: 760px;
      background: var(--card);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow);
      backdrop-filter: var(--glass-blur);
      position: relative;
      overflow: hidden;
    }
    .header {
      padding: 28px 28px 14px;
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background:
        radial-gradient(60% 140% at 0% 0%, rgba(110,231,255,.12) 0%, transparent 60%),
        radial-gradient(60% 140% at 100% 0%, rgba(139,92,246,.12) 0%, transparent 60%);
    }
    .brand { display: flex; align-items: center; gap: 12px; }
    .logo {
      width: 36px; height: 36px; border-radius: 10px;
      background: linear-gradient(135deg, var(--primary), var(--primary-2));
      box-shadow: 0 8px 30px rgba(139,92,246,.35);
    }
    .title { font-weight: 700; letter-spacing: .4px; font-size: clamp(20px, 2.1vw, 28px); }
    .subtitle { color: var(--muted); font-size: 12px; margin-top: -2px; }
    .balance {
      margin: 18px 28px 0;
      display: grid; grid-template-columns: 1fr auto; gap: 14px; align-items: center;
      background: var(--card-strong);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: var(--radius-lg);
      padding: 16px 18px;
    }
    .balance .label { color: var(--muted); font-size: 12px; }
    .balance .amount { font-weight: 700; font-size: clamp(22px, 3vw, 28px); color: var(--accent); text-shadow: 0 0 24px rgba(255,209,102,.25); }
    .stage {
      padding: 24px 28px 32px;
      display: grid; gap: 22px; justify-items: center; text-align: center;
    }
    .coin-wrap { width: clamp(160px, 36vw, 220px); height: clamp(160px, 36vw, 220px); perspective: 1200px; position: relative; }
    .coin {
      width: 100%; height: 100%; transform-style: preserve-3d; position: relative; transition: transform 1200ms cubic-bezier(.22,1.2,.36,1); cursor: pointer;
      background: var(--coin-golden);
      border-radius: 50%;
      border: 8px solid #f2c66a;
      box-shadow: inset 0 6px 18px rgba(255,255,255,.25), inset 0 -8px 28px rgba(0,0,0,.25), 0 18px 45px rgba(0,0,0,.35);
    }
    .face {
      position: absolute; inset: 0; border-radius: 50%; display: grid; place-items: center; font-weight: 700; font-size: clamp(46px, 10vw, 64px); color: #1a1f2e;
      backface-visibility: hidden; opacity: 0; transition: opacity 0.3s ease;
    }
    .face.show { opacity: 1; }
    .heads { background: var(--coin-golden); transform: rotateY(0deg); }
    .tails { background: var(--coin-golden); transform: rotateY(180deg); }
    .edge {
      position: absolute; inset: 0; border-radius: 50%; transform: translateZ(-10px);
      box-shadow: inset 0 0 0 12px #caa24e;
      background: repeating-radial-gradient(circle at 50% 50%, #caa24e 0 2px, #d7b35b 2px 6px);
    }
    .coin.flip-heads .heads { opacity: 1; }
    .coin.flip-tails .tails { opacity: 1; }
    .coin.flip-heads { transform: rotateY(1440deg); }
    .coin.flip-tails { transform: rotateY(1620deg); }
    .coin.flipping { animation: flip 1.6s cubic-bezier(.3,1.5,.3,1); }
    @keyframes flip {
      0% { transform: rotateY(0) translateY(0); }
      25% { transform: rotateY(360deg) translateY(-36px); }
      50% { transform: rotateY(720deg) translateY(0); }
      75% { transform: rotateY(1080deg) translateY(-18px); }
      100% { transform: rotateY(1440deg) translateY(0); }
    }
    .result {
      min-height: 28px; font-weight: 700; letter-spacing: 1.6px; color: var(--accent); text-shadow: 0 0 18px rgba(255,209,102,.35);
      font-size: clamp(14px, 2vw, 16px);
    }
    .coin-result {
      font-weight: 700; font-size: clamp(24px, 5vw, 32px); color: var(--accent); margin-top: 10px;
    }
    .coin-buttons {
      display: flex; gap: 10px; justify-content: center;
    }
    .overlay { position: fixed; inset: 0; display: none; align-items: center; justify-content: center; padding: 24px; background: rgba(2,6,23,.6); backdrop-filter: blur(6px); z-index: 30; }
    .overlay.show { display: flex; }
    .card { width: min(560px, 92vw); background: var(--card); border: 1px solid rgba(255,255,255,.12); border-radius: var(--radius-xl); box-shadow: var(--shadow); transform: scale(.96); opacity: 0; transition: transform .28s cubic-bezier(.22,1.2,.36,1), opacity .28s; }
    .card.show { transform: scale(1); opacity: 1; }
    .card .hd { padding: 24px 22px 8px; border-bottom: 1px solid rgba(255,255,255,.08); }
    .card .bd { padding: 18px 22px 24px; display: flex; flex-direction: column; align-items: center; }
    .h1 { font-size: clamp(22px, 3vw, 28px); font-weight: 700; }
    .money { font-size: clamp(34px, 6vw, 44px); font-weight: 700; color: var(--success); text-shadow: 0 0 24px rgba(34,197,94,.35); margin: 6px 0 10px; }
    .progress { height: 10px; width: 100%; background: rgba(255,255,255,.08); border-radius: 999px; overflow: hidden; }
    .bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--primary), var(--primary-2)); transition: width .4s ease; }
    .meta { font-size: 12px; color: var(--muted); margin: 8px 0 16px; }
    .channels { display: grid; gap: 10px; width: 100%; overflow-y: auto; padding: 0 4px; max-height: 300px; scrollbar-width: none; -ms-overflow-style: none; }
    .channels::-webkit-scrollbar { display: none; }
    .item { display: flex; align-items: center; justify-content: space-between; gap: 12px; background: var(--card-strong); border: 1px solid rgba(255,255,255,.1); padding: 12px 14px; border-radius: var(--radius-md); width: 100%; }
    .item .left { display: flex; align-items: center; gap: 10px; flex-grow: 1; }
    .badge { width: 28px; height: 28px; border-radius: 50%; display: grid; place-items: center; font-weight: 700; background: linear-gradient(135deg, var(--primary), var(--primary-2)); color: #081225; }
    .join {
      padding: 8px 12px; border-radius: 999px; border: none; font-weight: 700; font-family: "El Messiri", Arial;
      background: var(--button-gradient);
      color: #081225;
      cursor: pointer;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      display: flex; align-items: center; gap: 6px;
    }
    .join:hover {
      background: linear-gradient(135deg, #f3f4f6, #d1d5db);
      box-shadow: 0 16px 36px rgba(0,0,0,.3);
    }
    .join.joined {
      background: var(--button-joined);
      color: #081225;
      cursor: default;
      box-shadow: none;
    }
    .join[disabled] {
      opacity: .55;
      cursor: not-allowed;
      background: var(--button-gradient);
      color: #081225;
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
    }
    .join .tick {
      display: none;
      width: 16px;
      height: 16px;
    }
    .join.joined .tick {
      display: block;
    }
    .field { width: 100%; display: grid; gap: 8px; margin: 12px 0 6px; }
    .input { width: 100%; padding: 14px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,.18); background: rgba(0,0,0,.28); color: var(--text); outline: none; font-family: "El Messiri", Arial; }
    .input:focus { box-shadow: var(--ring); border-color: transparent; }
    .hint { font-size: 12px; color: var(--muted); }
    .status { min-height: 24px; font-weight: 600; margin-top: 10px; font-size: 14px; }
    .status.pending { color: var(--accent); }
    .status.ok { color: var(--success); }
    .status.err { color: var(--danger); }
    .btn {
      appearance: none; border: none; cursor: pointer; user-select: none; outline: none;
      padding: 12px 18px; border-radius: 999px; font-weight: 700; letter-spacing: .4px; color: #081225;
      background: var(--button-gradient);
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      transition: transform .18s ease, box-shadow .18s ease;
      font-family: "El Messiri", Arial;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 36px rgba(0,0,0,.3);
      background: linear-gradient(135deg, #f3f4f6, #d1d5db);
    }
    .btn:disabled {
      opacity: .55;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      background: var(--button-gradient);
      color: #081225;
    }
    .btn.continue {
      padding: 14px 24px;
      margin-left: -8px;
      margin-right: -8px;
      transform: scale(1.1);
      background: var(--button-continue);
      color: #ffffff;
    }
    .btn.continue:hover {
      transform: scale(1.12) translateY(-2px);
      background: linear-gradient(135deg, #ff33ff, #ff6666, #9933cc);
    }
    .btn.continue:disabled {
      opacity: .55;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      background: var(--button-continue);
      color: #ffffff;
    }
    .secondary {
      background: rgba(255,255,255,.08);
      color: var(--text);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.14);
    }
    .secondary:hover {
      background: rgba(255,255,255,.14);
      transform: translateY(-2px);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.18);
    }
    .firework {
      position: fixed;
      width: 5px;
      height: 5px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 100;
    }
    @keyframes firework {
      0% { 
        transform: translate(var(--startX), var(--startY)); 
        width: 0.5vmin; 
        opacity: 1; 
      }
      50% { 
        width: 0.5vmin; 
        opacity: 1; 
      }
      100% { 
        width: 45vmin; 
        opacity: 0; 
      }
    }
    @keyframes fireworkParticle {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
      }
      50% {
        opacity: 1;
      }
      100% {
        transform: translate(
          calc(-50% + var(--tx) * 100px),
          calc(-50% + var(--ty) * 100px)
        ) scale(1);
        opacity: 0;
      }
    }
    .firework-particle {
      position: fixed;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      pointer-events: none;
      z-index: 100;
      animation: fireworkParticle 1000ms forwards;
    }
    @media (prefers-reduced-motion: reduce) {
      .coin.flipping, .btn, .card, .join { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <div class="orb one" aria-hidden="true"></div>
  <div class="orb two" aria-hidden="true"></div>
  <main class="shell" role="main">
    <header class="header">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <svg width="32" height="32" viewBox="0 0 32 32" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="14" fill="#ffd166" stroke="#f2c66a" stroke-width="2"></circle>
            <text x="16" y="21" text-anchor="middle" font-size="16" font-weight="bold" fill="#1a1f2e" font-family="El Messiri, Arial">C</text>
          </svg>
        </div>
        <div>
          <div class="title">Free UPI Coin Toss</div>
          <div class="subtitle">Premium Rewards</div>
        </div>
      </div>
    </header>
    <section class="balance" aria-live="polite">
      <div>
        <div class="label">Current Balance</div>
        <div class="amount" id="balance">₹100</div>
      </div>
      <div class="result" id="result">&nbsp;</div>
    </section>
    <section class="stage">
      <div class="coin-wrap" aria-label="Coin" role="img">
        <div id="coin" class="coin" aria-hidden="true">
          <div class="edge"></div>
          <div class="face heads">H</div>
          <div class="face tails">T</div>
        </div>
      </div>
      <div class="coin-result" id="coinResult" aria-label="Coin result"></div>
      <div class="coin-buttons">
        <button class="btn" id="flipHeads"><i class="fas fa-crown"></i> Heads</button>
        <button class="btn" id="flipTails"><i class="fas fa-dragon"></i> Tails</button>
      </div>
    </section>
  </main>
  
  <div class="overlay" id="winOverlay" aria-modal="true" role="dialog" aria-labelledby="winTitle">
    <div class="card" id="winCard">
      <div class="hd"><div class="h1" id="winTitle">Congratulations!</div></div>
      <div class="bd">
        <div>You won:</div>
        <div class="money" id="winAmount">₹500</div>
        <button class="btn" id="withdraw"><i class="fas fa-wallet"></i> Withdraw</button>
      </div>
    </div>
  </div>
  
  <div class="overlay" id="channelsOverlay" role="dialog" aria-labelledby="chanTitle">
    <div class="card" id="channelsCard">
      <div class="hd"><div class="h1" id="chanTitle">Join Telegram Channels</div></div>
      <div class="bd">
        <div class="progress"><div class="bar" id="progress"></div></div>
        <div class="meta" id="progressText">
          <span id="joinedCount">0</span>/<span id="totalCount">0</span> channels joined
        </div>
        <div class="channels" id="list" aria-live="polite"></div>
        <button class="btn continue" id="continueUpi" disabled style="margin-top:18px;"><i class="fas fa-arrow-right"></i> Continue</button>
      </div>
    </div>
  </div>
  
  <div class="overlay" id="withdrawOverlay" role="dialog" aria-labelledby="withdrawTitle">
    <div class="card" id="withdrawCard" style="max-width:400px;">
      <div class="hd"><div class="h1" id="withdrawTitle">Withdraw Funds</div></div>
      <div class="bd" id="withdrawBody">
        <div class="field">
          <label class="hint" for="withdrawUpi">Enter UPI ID</label>
          <input id="withdrawUpi" class="input" inputmode="email" placeholder="name@bank" autocomplete="off">
        </div>
        <div style="display:flex; gap:10px; margin-top:10px;">
          <button class="btn" id="withdrawSubmit"><i class="fas fa-check"></i> Submit</button>
          <button class="btn secondary" id="withdrawCancel"><i class="fas fa-times"></i> Cancel</button>
        </div>
        <div class="status" id="withdrawStatus"></div>
      </div>
    </div>
  </div>

  <script>
    const balanceEl = document.getElementById('balance');
    const resultEl = document.getElementById('result');
    const coin = document.getElementById('coin');
    const coinResult = document.getElementById('coinResult');
    const flipHeads = document.getElementById('flipHeads');
    const flipTails = document.getElementById('flipTails');
    const winOverlay = document.getElementById('winOverlay');
    const winCard = document.getElementById('winCard');
    const withdrawBtn = document.getElementById('withdraw');
    const channelsOverlay = document.getElementById('channelsOverlay');
    const channelsCard = document.getElementById('channelsCard');
    const withdrawOverlay = document.getElementById('withdrawOverlay');
    const withdrawCard = document.getElementById('withdrawCard');
    const progressBar = document.getElementById('progress');
    const progressText = document.getElementById('progressText');
    const joinedCountEl = document.getElementById('joinedCount');
    const totalCountEl = document.getElementById('totalCount');
    const channelsList = document.getElementById('list');
    const continueUpi = document.getElementById('continueUpi');
    const withdrawUpi = document.getElementById('withdrawUpi');
    const withdrawSubmit = document.getElementById('withdrawSubmit');
    const withdrawCancel = document.getElementById('withdrawCancel');
    const withdrawStatus = document.getElementById('withdrawStatus');

    let balance = 100;
    let joinedChannels = 0;
    const channels = [{"id":"1a63c872-802c-4aa8-a295-73a5503eaf16","name":"Channel 1","link":"https:\/\/t.me\/TxDxBOTS","joined":false},{"id":"0f4a7bec-5ce8-4193-8463-97279307a9a0","name":"Channel 2","link":"https:\/\/t.me\/UPIxCASHxZONE","joined":false},{"id":"2e36000b-08e1-4494-a47b-588f14b2c777","name":"Channel 3","link":"https:\/\/t.me\/TaskBuzzz","joined":false},{"id":"6f4f639f-b92e-4114-8743-cc7aff1b2fe8","name":"Channel 4","link":"https:\/\/t.me\/+5_ytUJhO041jYTFl","joined":false},{"id":"34d1205a-f7bf-43bd-8ef6-768098215a30","name":"Channel 5","link":"https:\/\/t.me\/+VwxGW94s-GI1NGY9","joined":false},{"id":"c29ff2a3-6d41-483b-823f-4ff26dfed1f3","name":"Channel 6","link":"https:\/\/t.me\/+qjKH44CufGQxMTk","joined":false}];
    const totalChannels = channels.length;
    const winAmounts = [100, 200, 300, 500];
    let isFlipping = false;

    function setSize() {
      const size = Math.min(window.innerWidth * 0.36, window.innerHeight * 0.5, 220);
      document.querySelector('.coin-wrap').style.width = `${size}px`;
      document.querySelector('.coin-wrap').style.height = `${size}px`;
    }

    function getRandomWinAmount() {
      return winAmounts[Math.floor(Math.random() * winAmounts.length)];
    }

    function createFireworks() {
      const colors = ["#FFE066", "#FFD166", "#6EE7FF", "#8B5CF6", "#EF4444", "#22C55E"];
      const container = document.body;
      
      for (let i = 0; i < 5; i++) {
        const startX = Math.random() * window.innerWidth;
        const startY = Math.random() * (window.innerHeight / 2);
        
        const firework = document.createElement('div');
        firework.className = 'firework';
        firework.style.left = startX + 'px';
        firework.style.top = startY + 'px';
        firework.style.setProperty('--startX', startX + 'px');
        firework.style.setProperty('--startY', startY + 'px');
        firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        
        container.appendChild(firework);
        
        const animationDuration = Math.random() * 1000 + 1500;
        firework.style.animation = `firework ${animationDuration}ms forwards`;
        
        for (let j = 0; j < 30; j++) {
          setTimeout(() => {
            const particle = document.createElement('div');
            particle.className = 'firework-particle';
            particle.style.left = startX + 'px';
            particle.style.top = startY + 'px';
            particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            particle.style.setProperty('--tx', (Math.random() - 0.5) * 2);
            particle.style.setProperty('--ty', (Math.random() - 0.5) * 2);
            
            container.appendChild(particle);
            
            setTimeout(() => {
              particle.remove();
            }, 1000);
          }, j * 30);
        }
        
        setTimeout(() => {
          firework.remove();
        }, animationDuration);
      }
    }

    function flipCoin(isHeadsChoice) {
      if (isFlipping) return;
      isFlipping = true;
      coin.classList.add('flipping');
      resultEl.textContent = '';
      coinResult.textContent = '';

      const isHeads = isHeadsChoice; // Coin result matches user choice
      const targetClass = isHeads ? 'flip-heads' : 'flip-tails';
      const resultText = isHeads ? 'H' : 'T';
      const resultMessage = isHeads ? 'Heads' : 'Tails';

      coin.className = 'coin ' + targetClass;

      setTimeout(() => {
        isFlipping = false;
        coin.classList.remove('flipping');
        const wonAmount = getRandomWinAmount();
        updateBalance(wonAmount);
        document.getElementById('winAmount').textContent = `₹${wonAmount}`;
        showOverlay(winOverlay, winCard);
        coinResult.textContent = resultText; // Explicitly set H or T under coin
        coinResult.setAttribute('aria-label', `Coin result: ${resultMessage}`);
        resultEl.textContent = `You got ${resultMessage}! You Won ₹${wonAmount}!`;
        resultEl.style.color = 'var(--success)';
        
        createFireworks();
      }, 1600);
    }

    function updateBalance(amount) {
      balance += amount;
      balanceEl.textContent = `₹${balance}`;
    }

    function showOverlay(overlay, card) {
      overlay.classList.add('show');
      setTimeout(() => card.classList.add('show'), 10);
    }

    function hideOverlay(overlay, card) {
      card.classList.remove('show');
      setTimeout(() => overlay.classList.remove('show'), 280);
    }

    function updateProgress() {
      joinedCountEl.textContent = joinedChannels;
      totalCountEl.textContent = totalChannels;
      progressBar.style.width = `${(joinedChannels / totalChannels) * 100}%`;
      continueUpi.disabled = joinedChannels < totalChannels;
    }

    function populateChannels() {
      channelsList.innerHTML = '';
      channels.forEach((channel, index) => {
        const item = document.createElement('div');
        item.className = 'item';
        item.innerHTML = `
          <div class="left">
            <div class="badge">${index + 1}</div>
            <div>${channel.name}</div>
          </div>
          <button class="join${channel.joined ? ' joined' : ''}" data-index="${index}" ${channel.joined ? 'disabled' : ''} style="font-family: 'El Messiri', Arial;">
            ${channel.joined ? '<svg class="tick" viewBox="0 0 24 24" fill="none" stroke="#081225" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Joined' : '<i class="fab fa-telegram-plane"></i> Join'}
          </button>
        `;
        channelsList.appendChild(item);
      });
      updateProgress();
    }

    function validateUPI(upi) {
      const upiRegex = /^[a-zA-Z0-9.\-_]{2,256}@[a-zA-Z]{2,64}$/;
      return upiRegex.test(upi);
    }

    flipHeads.addEventListener('click', () => flipCoin(true));
    flipTails.addEventListener('click', () => flipCoin(false));

    withdrawBtn.addEventListener('click', () => {
      hideOverlay(winOverlay, winCard);
      showOverlay(channelsOverlay, channelsCard);
      populateChannels();
    });

    channelsList.addEventListener('click', (e) => {
      if (e.target.classList.contains('join') && !e.target.classList.contains('joined') && !e.target.disabled) {
        const index = parseInt(e.target.dataset.index);
        const channel = channels[index];
        window.open(channel.link, '_blank');
        e.target.setAttribute('disabled', '');
        e.target.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Opening...';
        e.target.style.background = 'var(--button-gradient)';
        e.target.style.color = '#081225';
        e.target.style.fontFamily = "'El Messiri', Arial";

        setTimeout(() => {
          e.target.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
          e.target.style.background = 'var(--button-gradient)';
          e.target.style.color = '#081225';
          e.target.style.fontFamily = "'El Messiri', Arial";
        }, 7000);

        setTimeout(() => {
          e.target.innerHTML = '<i class="fas fa-check"></i> Visit Confirmed';
          e.target.style.background = 'var(--button-gradient)';
          e.target.style.color = '#081225';
          e.target.style.fontFamily = "'El Messiri', Arial";
        }, 14000);

        setTimeout(() => {
          channel.joined = true;
          joinedChannels++;
          e.target.classList.add('joined');
          e.target.innerHTML = '<svg class="tick" viewBox="0 0 24 24" fill="none" stroke="#081225" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Joined';
          e.target.style.background = 'var(--button-joined)';
          e.target.style.color = '#081225';
          e.target.style.fontFamily = "'El Messiri', Arial";
          updateProgress();
        }, 21000);
      }
    });

    continueUpi.addEventListener('click', () => {
      if (joinedChannels === totalChannels) {
        hideOverlay(channelsOverlay, channelsCard);
        showOverlay(withdrawOverlay, withdrawCard);
      }
    });

    withdrawSubmit.addEventListener('click', () => {
      const upi = withdrawUpi.value.trim();
      withdrawStatus.className = 'status';
      if (!validateUPI(upi)) {
        withdrawStatus.textContent = 'Invalid UPI ID';
        withdrawStatus.classList.add('err');
        return;
      }
      withdrawStatus.textContent = 'Processing withdrawal...';
      withdrawStatus.classList.add('pending');
      setTimeout(() => {
        withdrawStatus.textContent = 'Withdrawal Successful!';
        withdrawStatus.classList.remove('pending');
        withdrawStatus.classList.add('ok');
        updateBalance(-balance);
        setTimeout(() => {
          hideOverlay(withdrawOverlay, withdrawCard);
          withdrawUpi.value = '';
          withdrawStatus.textContent = '';
        }, 2000);
      }, 1500);
    });

    withdrawCancel.addEventListener('click', () => {
      hideOverlay(withdrawOverlay, withdrawCard);
      withdrawUpi.value = '';
      withdrawStatus.textContent = '';
    });

    window.addEventListener('resize', setSize);
    setSize();
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a466b63c86eec7',t:'MTc1NzA2MTQxMA=='};var a=document.createElement('script');a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"a49f43dbaabe4a5495482ded818bbaca","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>